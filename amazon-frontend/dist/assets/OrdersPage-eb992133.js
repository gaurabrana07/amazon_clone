import{r as a,c as I,d as R,f as P,g as q,j as e,M as W,T as b,L as y,i as N,E as B,X as U}from"./index-87321579.js";import{L as V}from"./LoadingSpinner-d69db682.js";import{C as X}from"./CalendarIcon-6edc891e.js";function Y({title:r,titleId:l,...n},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const z=a.forwardRef(Y),G=z;function Q({title:r,titleId:l,...n},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const Z=a.forwardRef(Q),H=Z,ee=()=>{const[r,l]=a.useState(""),[n,c]=a.useState("all"),[x,w]=a.useState("all"),[j,k]=a.useState(!1),o=I(),{user:f,isAuthenticated:h}=R(),{getUserOrders:C,getOrderStats:S,cancelOrder:O,reorderItems:L,trackOrder:F}=P(),{showNotification:u}=q();if(a.useEffect(()=>{if(!h){o("/");return}},[h,o]),!h)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(V,{size:"large"})});const g=C(f.id),m=S(f.id),v=g.filter(s=>{const t=s.orderNumber.toLowerCase().includes(r.toLowerCase())||s.items.some(d=>d.name.toLowerCase().includes(r.toLowerCase())),$=n==="all"||s.status===n;let i=!0;if(x!=="all"){const d=new Date(s.createdAt),p=new Date;switch(x){case"last30":i=p-d<=30*24*60*60*1e3;break;case"last90":i=p-d<=90*24*60*60*1e3;break;case"lastyear":i=p-d<=365*24*60*60*1e3;break;default:i=!0}}return t&&$&&i}),D=async s=>{window.confirm("Are you sure you want to cancel this order?")&&((await O(s,"Customer request")).success?u("success","Order cancelled successfully"):u("error","Failed to cancel order"))},M=s=>{const t=L(s);t&&(u(`${t.length} items added to cart`,"success"),o("/cart"))},T=s=>{F(s)&&o(`/track-order/${s}`)},A=s=>{switch(s){case"confirmed":return"bg-blue-100 text-blue-800";case"processing":return"bg-yellow-100 text-yellow-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=s=>["confirmed","processing"].includes(s.status);return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Your Orders"}),e.jsx("p",{className:"text-gray-600",children:"Track packages, review past orders, and discover new favorites"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.total})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Delivered"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.delivered})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"In Transit"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.shipped})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Total Spent"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["$",(m.totalSpent/100).toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(W,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search orders by number or product name...",value:r,onChange:s=>l(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("button",{onClick:()=>k(!j),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsx(H,{className:"h-5 w-5"}),e.jsx("span",{children:"Filters"})]})]}),j&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:n,onChange:s=>c(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"all",children:"All Orders"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),e.jsxs("select",{value:x,onChange:s=>w(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"last30",children:"Last 30 days"}),e.jsx("option",{value:"last90",children:"Last 3 months"}),e.jsx("option",{value:"lastyear",children:"Last year"})]})]})]})})]}),v.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(b,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:g.length===0?"No orders yet":"No orders found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:g.length===0?"When you place orders, they will appear here.":"Try adjusting your search or filter criteria."}),e.jsx(y,{to:"/",className:"bg-orange-600 text-white px-6 py-2 rounded-md hover:bg-orange-700 transition-colors",children:"Start Shopping"})]})}):e.jsx("div",{className:"space-y-6",children:v.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Order Number"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.orderNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Order Date"}),e.jsx("p",{className:"font-medium text-gray-900",children:N(new Date(s.createdAt),"MMM dd, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsxs("p",{className:"font-medium text-gray-900",children:["$",(s.pricing.total/100).toFixed(2)]})]}),e.jsx("div",{children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${A(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 md:mt-0",children:[e.jsxs("button",{onClick:()=>T(s.orderNumber),className:"flex items-center space-x-1 text-orange-600 hover:text-orange-500 text-sm",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:"Track"})]}),e.jsxs(y,{to:`/order/${s.id}`,className:"flex items-center space-x-1 text-blue-600 hover:text-blue-500 text-sm",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:"View"})]}),e.jsxs("button",{onClick:()=>M(s.id),className:"flex items-center space-x-1 text-green-600 hover:text-green-500 text-sm",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:"Reorder"})]}),E(s)&&e.jsxs("button",{onClick:()=>D(s.id),className:"flex items-center space-x-1 text-red-600 hover:text-red-500 text-sm",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:"Cancel"})]})]})]})}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[s.items.slice(0,3).map(t=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-gray-600",children:["Quantity: ",t.quantity]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-medium text-gray-900",children:["$",(t.price*t.quantity/100).toFixed(2)]})})]},t.id)),s.items.length>3&&e.jsxs("p",{className:"text-sm text-gray-600",children:["+ ",s.items.length-3," more items"]})]}),s.status==="shipped"||s.status==="delivered"?e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsxs("span",{className:"text-blue-800 font-medium",children:[s.status==="delivered"?"Delivered":"Estimated Delivery",":"]}),e.jsx("span",{className:"text-blue-700 ml-1",children:N(new Date(s.shipping.estimatedDelivery),"MMM dd, yyyy")})]})}):s.status==="processing"?e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:e.jsx("p",{className:"text-yellow-800",children:"Your order is being prepared for shipment."})}):null]})]},s.id))})]})})};export{ee as default};
//# sourceMappingURL=OrdersPage-eb992133.js.map
