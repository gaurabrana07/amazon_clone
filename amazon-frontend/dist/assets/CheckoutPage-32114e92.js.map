{"version":3,"file":"CheckoutPage-32114e92.js","sources":["../../src/pages/CheckoutPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useCart } from '../context/CartContext';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { usePayment } from '../context/PaymentContext';\r\nimport { useOrders } from '../context/OrdersContext';\r\nimport { useNotification } from '../context/NotificationContext';\r\nimport { \r\n  CreditCardIcon, \r\n  MapPinIcon, \r\n  TruckIcon, \r\n  ShieldCheckIcon,\r\n  CheckCircleIcon\r\n} from '@heroicons/react/24/outline';\r\nimport LoadingSpinner from '../components/LoadingSpinner/LoadingSpinner';\r\n\r\nconst CheckoutPage = () => {\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const [selectedAddress, setSelectedAddress] = useState(null);\r\n  const [selectedPayment, setSelectedPayment] = useState(null);\r\n  const [selectedShipping, setSelectedShipping] = useState('standard');\r\n  const [orderNotes, setOrderNotes] = useState('');\r\n  const [isPlacingOrder, setIsPlacingOrder] = useState(false);\r\n  \r\n  // Enhanced payment method states\r\n  const [activePaymentTab, setActivePaymentTab] = useState('cards');\r\n  const [showAddCard, setShowAddCard] = useState(false);\r\n  const [selectedUPI, setSelectedUPI] = useState('');\r\n  const [selectedBank, setSelectedBank] = useState('');\r\n  const [selectedWallet, setSelectedWallet] = useState('');\r\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState('');\r\n\r\n  const navigate = useNavigate();\r\n  const { cart, getCartTotal, getCartItemCount, clearCart } = useCart();\r\n  const { user, isAuthenticated } = useAuth();\r\n  const { processPayment, getUserPaymentMethods } = usePayment();\r\n  const { createOrder } = useOrders();\r\n  const { showNotification } = useNotification();\r\n\r\n  const paymentMethods = getUserPaymentMethods(user?.id);\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate('/');\r\n      showNotification('error', 'Please sign in to proceed with checkout');\r\n      return;\r\n    }\r\n\r\n    if (getCartItemCount() === 0) {\r\n      navigate('/cart');\r\n      showNotification('error', 'Your cart is empty');\r\n      return;\r\n    }\r\n\r\n    // Set default address and payment method\r\n    if (user?.addresses?.length > 0) {\r\n      setSelectedAddress(user.addresses[0]);\r\n    }\r\n    if (paymentMethods.length > 0) {\r\n      setSelectedPayment(paymentMethods.find(method => method.isDefault) || paymentMethods[0]);\r\n      setActivePaymentTab('cards');\r\n    } else {\r\n      // If no saved cards, default to UPI or cards\r\n      setActivePaymentTab('cards');\r\n      setShowAddCard(true);\r\n    }\r\n  }, [isAuthenticated, user, paymentMethods, getCartItemCount, navigate, showNotification]);\r\n\r\n  const subtotal = getCartTotal();\r\n  const tax = Math.round(subtotal * 0.08); // 8% tax\r\n  const shippingOptions = {\r\n    standard: { cost: 0, days: '5-7', label: 'Standard Shipping (FREE)' },\r\n    express: { cost: 999, days: '2-3', label: 'Express Shipping' },\r\n    overnight: { cost: 1999, days: '1', label: 'Overnight Shipping' }\r\n  };\r\n  const shippingCost = shippingOptions[selectedShipping].cost;\r\n  const total = subtotal + tax + shippingCost;\r\n\r\n  const steps = [\r\n    { id: 1, title: 'Shipping Address', icon: MapPinIcon },\r\n    { id: 2, title: 'Payment Method', icon: CreditCardIcon },\r\n    { id: 3, title: 'Review Order', icon: CheckCircleIcon }\r\n  ];\r\n\r\n  const handlePlaceOrder = async () => {\r\n    // Validate based on selected payment method\r\n    let paymentMethodData = null;\r\n    \r\n    if (activePaymentTab === 'cards') {\r\n      if (!selectedPayment && !showAddCard) {\r\n        showNotification('error', 'Please select a payment method');\r\n        return;\r\n      }\r\n      paymentMethodData = selectedPayment || { type: 'card' };\r\n    } else if (activePaymentTab === 'upi') {\r\n      if (!selectedUPI) {\r\n        showNotification('error', 'Please select a UPI payment method');\r\n        return;\r\n      }\r\n      paymentMethodData = { type: 'upi', provider: selectedUPI };\r\n    } else if (activePaymentTab === 'netbanking') {\r\n      if (!selectedBank) {\r\n        showNotification('error', 'Please select a bank for net banking');\r\n        return;\r\n      }\r\n      paymentMethodData = { type: 'netbanking', bank: selectedBank };\r\n    } else if (activePaymentTab === 'wallets') {\r\n      if (!selectedWallet) {\r\n        showNotification('error', 'Please select a wallet');\r\n        return;\r\n      }\r\n      paymentMethodData = { type: 'wallet', provider: selectedWallet };\r\n    } else if (activePaymentTab === 'cod') {\r\n      if (selectedPaymentMethod !== 'cod') {\r\n        showNotification('error', 'Please confirm Cash on Delivery');\r\n        return;\r\n      }\r\n      paymentMethodData = { type: 'cod' };\r\n    }\r\n\r\n    if (!selectedAddress) {\r\n      showNotification('error', 'Please select a shipping address');\r\n      return;\r\n    }\r\n\r\n    setIsPlacingOrder(true);\r\n\r\n    try {\r\n      // Process payment (skip for COD)\r\n      let paymentResult = { success: true };\r\n      \r\n      if (paymentMethodData.type !== 'cod') {\r\n        paymentResult = await processPayment({\r\n          amount: total,\r\n          paymentMethod: paymentMethodData,\r\n          currency: 'INR'\r\n        });\r\n\r\n        if (!paymentResult.success) {\r\n          showNotification('error', paymentResult.error?.message || 'Payment failed');\r\n          setIsPlacingOrder(false);\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Create order\r\n      const orderData = {\r\n        items: cart,\r\n        shippingAddress: selectedAddress,\r\n        paymentMethod: paymentMethodData.type,\r\n        paymentDetails: {\r\n          transactionId: paymentResult.transaction?.id || `${paymentMethodData.type}_${Date.now()}`,\r\n          method: paymentMethodData.type,\r\n          provider: paymentMethodData.provider || paymentMethodData.bank || 'N/A',\r\n          last4: paymentMethodData.type === 'card' ? (selectedPayment?.cardNumber?.slice(-4) || '****') : null\r\n        },\r\n        shippingMethod: selectedShipping,\r\n        shippingCost,\r\n        subtotal,\r\n        tax,\r\n        total,\r\n        notes: orderNotes\r\n      };\r\n\r\n      const orderResult = await createOrder(orderData, user);\r\n\r\n      if (orderResult.success) {\r\n        clearCart();\r\n        showNotification('success', 'Order placed successfully!');\r\n        navigate(`/order-confirmation/${orderResult.order.id}`);\r\n      } else {\r\n        showNotification('error', 'Failed to create order');\r\n      }\r\n    } catch (error) {\r\n      showNotification('error', 'An error occurred during checkout');\r\n      console.error('Checkout error:', error);\r\n    } finally {\r\n      setIsPlacingOrder(false);\r\n    }\r\n  };\r\n\r\n  if (!isAuthenticated || getCartItemCount() === 0) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <LoadingSpinner size=\"large\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        {/* Progress Steps */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center justify-between\">\r\n            {steps.map((step, index) => {\r\n              const Icon = step.icon;\r\n              const isActive = currentStep === step.id;\r\n              const isCompleted = currentStep > step.id;\r\n              \r\n              return (\r\n                <div key={step.id} className=\"flex items-center\">\r\n                  <div className={`flex items-center justify-center w-10 h-10 rounded-full ${\r\n                    isCompleted ? 'bg-green-500 text-white' :\r\n                    isActive ? 'bg-orange-500 text-white' :\r\n                    'bg-gray-300 text-gray-600'\r\n                  }`}>\r\n                    {isCompleted ? (\r\n                      <CheckCircleIcon className=\"h-6 w-6\" />\r\n                    ) : (\r\n                      <Icon className=\"h-6 w-6\" />\r\n                    )}\r\n                  </div>\r\n                  <span className={`ml-2 text-sm font-medium ${\r\n                    isActive ? 'text-orange-600' : 'text-gray-600'\r\n                  }`}>\r\n                    {step.title}\r\n                  </span>\r\n                  {index < steps.length - 1 && (\r\n                    <div className={`w-24 h-0.5 mx-4 ${\r\n                      isCompleted ? 'bg-green-500' : 'bg-gray-300'\r\n                    }`} />\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          {/* Main Content */}\r\n          <div className=\"lg:col-span-2 space-y-6\">\r\n            {/* Step 1: Shipping Address */}\r\n            {currentStep === 1 && (\r\n              <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n                <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Shipping Address</h2>\r\n                \r\n                {user?.addresses?.length > 0 ? (\r\n                  <div className=\"space-y-3\">\r\n                    {user.addresses.map((address) => (\r\n                      <div\r\n                        key={address.id}\r\n                        className={`p-4 border rounded-lg cursor-pointer transition-colors ${\r\n                          selectedAddress?.id === address.id\r\n                            ? 'border-orange-500 bg-orange-50'\r\n                            : 'border-gray-200 hover:border-gray-300'\r\n                        }`}\r\n                        onClick={() => setSelectedAddress(address)}\r\n                      >\r\n                        <div className=\"flex items-start justify-between\">\r\n                          <div>\r\n                            <h3 className=\"font-medium text-gray-900\">{address.fullName}</h3>\r\n                            <p className=\"text-gray-600\">{address.streetAddress}</p>\r\n                            <p className=\"text-gray-600\">\r\n                              {address.city}, {address.state} {address.zipCode}\r\n                            </p>\r\n                            <p className=\"text-gray-600\">{address.country}</p>\r\n                            {address.phone && (\r\n                              <p className=\"text-gray-600\">Phone: {address.phone}</p>\r\n                            )}\r\n                          </div>\r\n                          <input\r\n                            type=\"radio\"\r\n                            checked={selectedAddress?.id === address.id}\r\n                            onChange={() => setSelectedAddress(address)}\r\n                            className=\"h-4 w-4 text-orange-600 focus:ring-orange-500\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                    \r\n                    {/* Add new address button */}\r\n                    <button\r\n                      onClick={() => navigate('/addresses')}\r\n                      className=\"w-full p-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-orange-300 hover:text-orange-600 transition-colors flex items-center justify-center space-x-2\"\r\n                    >\r\n                      <MapPinIcon className=\"h-5 w-5\" />\r\n                      <span>Add a new address</span>\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <MapPinIcon className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No addresses found</h3>\r\n                    <p className=\"text-gray-600 mb-4\">Add a shipping address to continue</p>\r\n                    <button \r\n                      onClick={() => navigate('/addresses')}\r\n                      className=\"bg-orange-600 text-white px-4 py-2 rounded-md hover:bg-orange-700\"\r\n                    >\r\n                      Add Address\r\n                    </button>\r\n                  </div>\r\n                )}\r\n\r\n                {selectedAddress && (\r\n                  <div className=\"mt-6\">\r\n                    <button\r\n                      onClick={() => setCurrentStep(2)}\r\n                      className=\"w-full bg-orange-600 text-white py-3 px-4 rounded-md hover:bg-orange-700 font-medium\"\r\n                    >\r\n                      Continue to Payment Method\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 2: Payment Method */}\r\n            {currentStep === 2 && (\r\n              <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n                <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Choose Payment Method</h2>\r\n                \r\n                <div className=\"space-y-6\">\r\n                  {/* Payment Options Tabs */}\r\n                  <div className=\"border-b border-gray-200\">\r\n                    <nav className=\"-mb-px flex space-x-8\">\r\n                      {[\r\n                        { id: 'cards', name: 'Credit/Debit Cards', icon: 'fas fa-credit-card' },\r\n                        { id: 'upi', name: 'UPI', icon: 'fas fa-mobile-alt' },\r\n                        { id: 'netbanking', name: 'Net Banking', icon: 'fas fa-university' },\r\n                        { id: 'wallets', name: 'Digital Wallets', icon: 'fas fa-wallet' },\r\n                        { id: 'cod', name: 'Cash on Delivery', icon: 'fas fa-money-bill-wave' }\r\n                      ].map((tab) => (\r\n                        <button\r\n                          key={tab.id}\r\n                          onClick={() => setActivePaymentTab(tab.id)}\r\n                          className={`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${\r\n                            activePaymentTab === tab.id\r\n                              ? 'border-orange-500 text-orange-600'\r\n                              : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                          }`}\r\n                        >\r\n                          <i className={`${tab.icon} mr-2`}></i>\r\n                          {tab.name}\r\n                        </button>\r\n                      ))}\r\n                    </nav>\r\n                  </div>\r\n\r\n                  {/* Credit/Debit Cards */}\r\n                  {activePaymentTab === 'cards' && (\r\n                    <div className=\"space-y-4\">\r\n                      {/* Saved Cards */}\r\n                      {paymentMethods.length > 0 && (\r\n                        <div>\r\n                          <h3 className=\"text-lg font-medium text-gray-900 mb-3\">Saved Cards</h3>\r\n                          <div className=\"space-y-3\">\r\n                            {paymentMethods.map((method) => (\r\n                              <div\r\n                                key={method.id}\r\n                                className={`p-4 border rounded-lg cursor-pointer transition-colors ${\r\n                                  selectedPayment?.id === method.id\r\n                                    ? 'border-orange-500 bg-orange-50'\r\n                                    : 'border-gray-200 hover:border-gray-300'\r\n                                }`}\r\n                                onClick={() => setSelectedPayment(method)}\r\n                              >\r\n                                <div className=\"flex items-center justify-between\">\r\n                                  <div className=\"flex items-center space-x-3\">\r\n                                    <div className=\"flex-shrink-0\">\r\n                                      <i className={`fab fa-cc-${method.cardType?.toLowerCase()} text-2xl text-gray-600`}></i>\r\n                                    </div>\r\n                                    <div>\r\n                                      <h4 className=\"font-medium text-gray-900\">\r\n                                        {method.cardType?.toUpperCase()} ending in {method.cardNumber?.slice(-4)}\r\n                                      </h4>\r\n                                      <p className=\"text-sm text-gray-600\">\r\n                                        Expires {method.expiryMonth}/{method.expiryYear}\r\n                                      </p>\r\n                                      {method.isDefault && (\r\n                                        <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n                                          Default\r\n                                        </span>\r\n                                      )}\r\n                                    </div>\r\n                                  </div>\r\n                                  <input\r\n                                    type=\"radio\"\r\n                                    checked={selectedPayment?.id === method.id}\r\n                                    onChange={() => setSelectedPayment(method)}\r\n                                    className=\"h-4 w-4 text-orange-600 focus:ring-orange-500\"\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                          <div className=\"mt-4\">\r\n                            <button\r\n                              onClick={() => setShowAddCard(true)}\r\n                              className=\"text-orange-600 hover:text-orange-700 font-medium text-sm\"\r\n                            >\r\n                              + Add a new card\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Add New Card Form */}\r\n                      {(paymentMethods.length === 0 || showAddCard) && (\r\n                        <div className=\"border rounded-lg p-4\">\r\n                          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n                            {paymentMethods.length > 0 ? 'Add New Card' : 'Enter Card Details'}\r\n                          </h3>\r\n                          <form className=\"space-y-4\">\r\n                            <div>\r\n                              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                Card Number\r\n                              </label>\r\n                              <input\r\n                                type=\"text\"\r\n                                placeholder=\"1234 5678 9012 3456\"\r\n                                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                              />\r\n                            </div>\r\n                            <div className=\"grid grid-cols-3 gap-4\">\r\n                              <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                  Expiry Month\r\n                                </label>\r\n                                <select className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\">\r\n                                  <option value=\"\">MM</option>\r\n                                  {Array.from({ length: 12 }, (_, i) => (\r\n                                    <option key={i + 1} value={String(i + 1).padStart(2, '0')}>\r\n                                      {String(i + 1).padStart(2, '0')}\r\n                                    </option>\r\n                                  ))}\r\n                                </select>\r\n                              </div>\r\n                              <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                  Expiry Year\r\n                                </label>\r\n                                <select className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\">\r\n                                  <option value=\"\">YYYY</option>\r\n                                  {Array.from({ length: 10 }, (_, i) => (\r\n                                    <option key={i} value={new Date().getFullYear() + i}>\r\n                                      {new Date().getFullYear() + i}\r\n                                    </option>\r\n                                  ))}\r\n                                </select>\r\n                              </div>\r\n                              <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                  CVV\r\n                                </label>\r\n                                <input\r\n                                  type=\"text\"\r\n                                  placeholder=\"123\"\r\n                                  maxLength=\"4\"\r\n                                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                                />\r\n                              </div>\r\n                            </div>\r\n                            <div>\r\n                              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                Name on Card\r\n                              </label>\r\n                              <input\r\n                                type=\"text\"\r\n                                placeholder=\"John Doe\"\r\n                                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                              />\r\n                            </div>\r\n                            <div className=\"flex items-center\">\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                id=\"saveCard\"\r\n                                className=\"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded\"\r\n                              />\r\n                              <label htmlFor=\"saveCard\" className=\"ml-2 block text-sm text-gray-700\">\r\n                                Save this card for future purchases\r\n                              </label>\r\n                            </div>\r\n                            <div className=\"bg-blue-50 p-3 rounded-md\">\r\n                              <div className=\"flex\">\r\n                                <i className=\"fas fa-shield-alt text-blue-600 mr-2 mt-0.5\"></i>\r\n                                <div className=\"text-sm text-blue-800\">\r\n                                  <p className=\"font-medium\">Your payment information is secure</p>\r\n                                  <p>We use SSL encryption to protect your financial data.</p>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </form>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* UPI Payment */}\r\n                  {activePaymentTab === 'upi' && (\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                        {[\r\n                          { name: 'Google Pay', icon: 'fab fa-google-pay', id: 'gpay' },\r\n                          { name: 'PhonePe', icon: 'fas fa-mobile-alt', id: 'phonepe' },\r\n                          { name: 'Paytm', icon: 'fas fa-wallet', id: 'paytm' },\r\n                          { name: 'Other UPI Apps', icon: 'fas fa-qrcode', id: 'other' }\r\n                        ].map((upi) => (\r\n                          <div\r\n                            key={upi.id}\r\n                            className={`p-4 border rounded-lg cursor-pointer text-center transition-colors ${\r\n                              selectedUPI === upi.id\r\n                                ? 'border-orange-500 bg-orange-50'\r\n                                : 'border-gray-200 hover:border-gray-300'\r\n                            }`}\r\n                            onClick={() => setSelectedUPI(upi.id)}\r\n                          >\r\n                            <i className={`${upi.icon} text-2xl text-gray-600 mb-2`}></i>\r\n                            <p className=\"text-sm font-medium text-gray-900\">{upi.name}</p>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                      \r\n                      {selectedUPI && (\r\n                        <div className=\"border rounded-lg p-4\">\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                            Enter UPI ID\r\n                          </label>\r\n                          <input\r\n                            type=\"text\"\r\n                            placeholder=\"example@upi\"\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                          />\r\n                          <p className=\"text-xs text-gray-500 mt-1\">\r\n                            You will be redirected to your UPI app to complete the payment\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Net Banking */}\r\n                  {activePaymentTab === 'netbanking' && (\r\n                    <div className=\"space-y-4\">\r\n                      <h3 className=\"text-lg font-medium text-gray-900\">Choose Your Bank</h3>\r\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\r\n                        {[\r\n                          'State Bank of India', 'HDFC Bank', 'ICICI Bank', \r\n                          'Axis Bank', 'Punjab National Bank', 'Bank of Baroda',\r\n                          'Canara Bank', 'Union Bank', 'Other Banks'\r\n                        ].map((bank) => (\r\n                          <div\r\n                            key={bank}\r\n                            className={`p-3 border rounded-lg cursor-pointer text-center transition-colors ${\r\n                              selectedBank === bank\r\n                                ? 'border-orange-500 bg-orange-50'\r\n                                : 'border-gray-200 hover:border-gray-300'\r\n                            }`}\r\n                            onClick={() => setSelectedBank(bank)}\r\n                          >\r\n                            <p className=\"text-sm font-medium text-gray-900\">{bank}</p>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                      {selectedBank && (\r\n                        <div className=\"bg-blue-50 p-3 rounded-md\">\r\n                          <p className=\"text-sm text-blue-800\">\r\n                            <i className=\"fas fa-info-circle mr-2\"></i>\r\n                            You will be redirected to {selectedBank} to complete your payment securely.\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Digital Wallets */}\r\n                  {activePaymentTab === 'wallets' && (\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                        {[\r\n                          { name: 'Paytm Wallet', icon: 'fas fa-wallet', id: 'paytm' },\r\n                          { name: 'PhonePe Wallet', icon: 'fas fa-mobile-alt', id: 'phonepe' },\r\n                          { name: 'Amazon Pay', icon: 'fab fa-amazon-pay', id: 'amazonpay' },\r\n                          { name: 'Mobikwik', icon: 'fas fa-wallet', id: 'mobikwik' }\r\n                        ].map((wallet) => (\r\n                          <div\r\n                            key={wallet.id}\r\n                            className={`p-4 border rounded-lg cursor-pointer text-center transition-colors ${\r\n                              selectedWallet === wallet.id\r\n                                ? 'border-orange-500 bg-orange-50'\r\n                                : 'border-gray-200 hover:border-gray-300'\r\n                            }`}\r\n                            onClick={() => setSelectedWallet(wallet.id)}\r\n                          >\r\n                            <i className={`${wallet.icon} text-2xl text-gray-600 mb-2`}></i>\r\n                            <p className=\"text-sm font-medium text-gray-900\">{wallet.name}</p>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                      {selectedWallet && (\r\n                        <div className=\"bg-green-50 p-3 rounded-md\">\r\n                          <p className=\"text-sm text-green-800\">\r\n                            <i className=\"fas fa-check-circle mr-2\"></i>\r\n                            Pay securely using your {selectedWallet} wallet balance.\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Cash on Delivery */}\r\n                  {activePaymentTab === 'cod' && (\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"border rounded-lg p-6 text-center\">\r\n                        <i className=\"fas fa-money-bill-wave text-4xl text-green-600 mb-4\"></i>\r\n                        <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Cash on Delivery</h3>\r\n                        <p className=\"text-gray-600 mb-4\">\r\n                          Pay with cash when your order is delivered to your doorstep.\r\n                        </p>\r\n                        <div className=\"bg-yellow-50 p-3 rounded-md\">\r\n                          <p className=\"text-sm text-yellow-800\">\r\n                            <i className=\"fas fa-exclamation-triangle mr-2\"></i>\r\n                            COD charges may apply. Please keep exact change ready.\r\n                          </p>\r\n                        </div>\r\n                        <button\r\n                          onClick={() => setSelectedPaymentMethod('cod')}\r\n                          className={`mt-4 px-6 py-2 rounded-md font-medium transition-colors ${\r\n                            selectedPaymentMethod === 'cod'\r\n                              ? 'bg-orange-600 text-white'\r\n                              : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                          }`}\r\n                        >\r\n                          {selectedPaymentMethod === 'cod' ? 'Selected' : 'Select COD'}\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Navigation Buttons */}\r\n                <div className=\"mt-8 flex space-x-4\">\r\n                  <button\r\n                    onClick={() => setCurrentStep(1)}\r\n                    className=\"flex-1 bg-gray-200 text-gray-900 py-3 px-4 rounded-md hover:bg-gray-300 font-medium\"\r\n                  >\r\n                    <i className=\"fas fa-arrow-left mr-2\"></i>\r\n                    Back to Address\r\n                  </button>\r\n                  <button\r\n                    onClick={() => {\r\n                      if (activePaymentTab === 'cod' && selectedPaymentMethod === 'cod') {\r\n                        setCurrentStep(3);\r\n                      } else if (activePaymentTab === 'cards' && (selectedPayment || showAddCard)) {\r\n                        setCurrentStep(3);\r\n                      } else if (activePaymentTab === 'upi' && selectedUPI) {\r\n                        setCurrentStep(3);\r\n                      } else if (activePaymentTab === 'netbanking' && selectedBank) {\r\n                        setCurrentStep(3);\r\n                      } else if (activePaymentTab === 'wallets' && selectedWallet) {\r\n                        setCurrentStep(3);\r\n                      } else {\r\n                        alert('Please select a payment method to continue');\r\n                      }\r\n                    }}\r\n                    className=\"flex-1 bg-orange-600 text-white py-3 px-4 rounded-md hover:bg-orange-700 font-medium\"\r\n                  >\r\n                    Review Order\r\n                    <i className=\"fas fa-arrow-right ml-2\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 3: Review Order */}\r\n            {currentStep === 3 && (\r\n              <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n                <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Review Your Order</h2>\r\n                \r\n                {/* Order Items */}\r\n                <div className=\"space-y-4 mb-6\">\r\n                  {cart.map((item) => (\r\n                    <div key={item.id} className=\"flex items-center space-x-4 py-3 border-b\">\r\n                      <img\r\n                        src={item.image}\r\n                        alt={item.name}\r\n                        className=\"w-16 h-16 object-cover rounded\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <h3 className=\"font-medium text-gray-900\">{item.name}</h3>\r\n                        <p className=\"text-gray-600\">Quantity: {item.quantity}</p>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <p className=\"font-medium text-gray-900\">\r\n                          ${(item.price * item.quantity).toFixed(2)}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Shipping Options */}\r\n                <div className=\"mb-6\">\r\n                  <h3 className=\"font-medium text-gray-900 mb-3\">Shipping Options</h3>\r\n                  <div className=\"space-y-2\">\r\n                    {Object.entries(shippingOptions).map(([key, option]) => (\r\n                      <label key={key} className=\"flex items-center\">\r\n                        <input\r\n                          type=\"radio\"\r\n                          name=\"shipping\"\r\n                          value={key}\r\n                          checked={selectedShipping === key}\r\n                          onChange={(e) => setSelectedShipping(e.target.value)}\r\n                          className=\"h-4 w-4 text-orange-600 focus:ring-orange-500\"\r\n                        />\r\n                        <span className=\"ml-2 text-sm text-gray-700\">\r\n                          {option.label} - {option.days} business days\r\n                          {option.cost > 0 && ` (+$${(option.cost / 100).toFixed(2)})`}\r\n                        </span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Order Notes */}\r\n                <div className=\"mb-6\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Order Notes (Optional)\r\n                  </label>\r\n                  <textarea\r\n                    value={orderNotes}\r\n                    onChange={(e) => setOrderNotes(e.target.value)}\r\n                    rows={3}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                    placeholder=\"Any special instructions for your order...\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"flex space-x-4\">\r\n                  <button\r\n                    onClick={() => setCurrentStep(2)}\r\n                    className=\"flex-1 bg-gray-200 text-gray-900 py-3 px-4 rounded-md hover:bg-gray-300 font-medium\"\r\n                  >\r\n                    Back to Payment\r\n                  </button>\r\n                  <button\r\n                    onClick={handlePlaceOrder}\r\n                    disabled={isPlacingOrder}\r\n                    className=\"flex-1 bg-orange-600 text-white py-3 px-4 rounded-md hover:bg-orange-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center\"\r\n                  >\r\n                    {isPlacingOrder ? (\r\n                      <>\r\n                        <LoadingSpinner size=\"small\" />\r\n                        <span className=\"ml-2\">Processing...</span>\r\n                      </>\r\n                    ) : (\r\n                      'Place Order'\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Order Summary Sidebar */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-white rounded-lg shadow-sm p-6 sticky top-4\">\r\n              <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Order Summary</h3>\r\n              \r\n              <div className=\"space-y-2 text-sm\">\r\n                <div className=\"flex justify-between\">\r\n                  <span>Subtotal ({getCartItemCount()} items)</span>\r\n                  <span>${(subtotal / 100).toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span>Shipping</span>\r\n                  <span>\r\n                    {shippingCost === 0 ? 'FREE' : `$${(shippingCost / 100).toFixed(2)}`}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span>Tax</span>\r\n                  <span>${(tax / 100).toFixed(2)}</span>\r\n                </div>\r\n                <hr className=\"my-2\" />\r\n                <div className=\"flex justify-between font-bold text-lg\">\r\n                  <span>Total</span>\r\n                  <span>${(total / 100).toFixed(2)}</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Security Notice */}\r\n              <div className=\"mt-6 p-3 bg-green-50 rounded-lg\">\r\n                <div className=\"flex items-center\">\r\n                  <ShieldCheckIcon className=\"h-5 w-5 text-green-600 mr-2\" />\r\n                  <span className=\"text-sm text-green-800\">\r\n                    Your payment information is secure and encrypted\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutPage;"],"names":["CheckoutPage","currentStep","setCurrentStep","useState","selectedAddress","setSelectedAddress","selectedPayment","setSelectedPayment","selectedShipping","setSelectedShipping","orderNotes","setOrderNotes","isPlacingOrder","setIsPlacingOrder","activePaymentTab","setActivePaymentTab","showAddCard","setShowAddCard","selectedUPI","setSelectedUPI","selectedBank","setSelectedBank","selectedWallet","setSelectedWallet","selectedPaymentMethod","setSelectedPaymentMethod","navigate","useNavigate","cart","getCartTotal","getCartItemCount","clearCart","useCart","user","isAuthenticated","useAuth","processPayment","getUserPaymentMethods","usePayment","createOrder","useOrders","showNotification","useNotification","paymentMethods","useEffect","_a","method","subtotal","tax","shippingOptions","shippingCost","total","steps","MapPinIcon","CreditCardIcon","CheckCircleIcon","handlePlaceOrder","paymentMethodData","paymentResult","orderData","_b","_c","orderResult","error","jsx","LoadingSpinner","jsxs","step","index","Icon","isActive","isCompleted","address","tab","_","i","upi","bank","wallet","item","key","option","e","Fragment","ShieldCheckIcon"],"mappings":"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"}